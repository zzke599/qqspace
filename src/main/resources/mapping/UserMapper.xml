<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.qqspace.dao.UserMapper">
	<resultMap id="BaseResultMap" type="user">
		<!-- WARNING - @mbg.generated This element is automatically generated by
			MyBatis Generator, do not modify. This element was generated on Thu Jul 04
			10:53:21 CST 2019. -->
		<id column="id" jdbcType="INTEGER" property="id" />
		<result column="user_login" jdbcType="VARCHAR" property="userLogin" />
		<result column="user_name" jdbcType="VARCHAR" property="userName" />
		<result column="user_gender" jdbcType="BIGINT" property="userGender" />
		<result column="user_age" jdbcType="INTEGER" property="userAge" />
		<result column="user_telphone" jdbcType="VARCHAR" property="userTelphone" />
		<result column="user_email" jdbcType="VARCHAR" property="userEmail" />
		<result column="user_loves" jdbcType="VARCHAR" property="userLoves" />
		<result column="user_address" jdbcType="VARCHAR" property="userAddress" />
		<result column="user_intro" jdbcType="VARCHAR" property="userIntro" />
		<result column="user_theme" jdbcType="VARCHAR" property="userTheme" />
		<result column="user_signature" jdbcType="VARCHAR" property="userSignature" />
		<result column="user_createType" jdbcType="BIGINT" property="userCreatetype" />
		<result column="user_createDate" jdbcType="TIMESTAMP" property="userCreatedate" />
		<result column="user_birthday" jdbcType="DATE" property="userBirthday" />
		<result column="user_sendWord" jdbcType="VARCHAR" property="userSendWord" />
	</resultMap>
	<sql id="Base_Column_List">
		<!-- WARNING - @mbg.generated This element is automatically generated by
			MyBatis Generator, do not modify. This element was generated on Thu Jul 04
			10:53:21 CST 2019. -->
		id, user_login, user_name, user_gender, user_age, user_telphone,
		user_email, user_loves,user_address,user_intro,
		user_theme,
		user_signature, user_createType,
		user_createDate,user_birthday,user_sendWord
	</sql>
	<select id="selectByPrimaryKey" parameterType="java.lang.Integer"
			resultMap="BaseResultMap">
		<!-- WARNING - @mbg.generated This element is automatically generated by
			MyBatis Generator, do not modify. This element was generated on Thu Jul 04
			10:53:21 CST 2019. -->
		select
		<include refid="Base_Column_List" />
		from user_info
		where id = #{id,jdbcType=INTEGER}
	</select>
	<select id="selectByuserLogin" parameterType="java.lang.String"
			resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List" />
		from user_info
		where user_login = #{userLogin,jdbcType=VARCHAR}
	</select>
	<!--selectWeekAddUserCount  查询所有用户数量	-->
	<select id="selectAllUsersCount" resultType="int" >
		select count(*) from user_info
	</select>
	<select id="selectWeekAddUserCount" resultType="com.qqspace.vo.EChartsVO">
		select DATE_FORMAT(a.timeDay,'%m-%d') as date,ifnull(b.count,0) as count
		from (
			SELECT curdate() as timeDay
			union all
			SELECT date_sub(curdate(), interval 1 day) as timeDay
			union all
			SELECT date_sub(curdate(), interval 2 day) as timeDay
			union all
			SELECT date_sub(curdate(), interval 3 day) as timeDay
			union all
			SELECT date_sub(curdate(), interval 4 day) as timeDay
			union all
			SELECT date_sub(curdate(), interval 5 day) as timeDay
			union all
			SELECT date_sub(curdate(), interval 6 day) as timeDay
			) a left join (
			select date(user_createDate) as time,COUNT(*) count
			from user_info u
			group by date(u.user_createDate)
			) b on a.timeDay = b.time order by date
	</select>

	<select id="selectAllUsersCountWithPageByCondition" resultType="int" parameterType="user">
		select  count(*)
		from user_info
		where 1 = 1
		<if test="condition.userName != null">
			and user_name like concat('%',#{condition.userName},'%')
		</if>
		<if test="condition.userTelphone != null">
			and user_telphone like concat('%',#{condition.userTelphone})
		</if>
		<if test="condition.userEmail != null">
			and user_email  = like concat('%',#{condition.userEmail})
		</if>
	</select>
	<select id="selectAllUsersWithPageByCondition"  parameterType="user" resultType="user">
		select  *
		from user_info
		where 1 = 1
		<if test="condition.userName != null">
			and user_name like concat('%',#{condition.userName},'%')
		</if>
		<if test="condition.userTelphone != null">
			and user_telphone like concat('%',#{condition.userTelphone})
		</if>
		<if test="condition.userEmail != null">
			and user_email  = like concat('%',#{condition.userEmail})
		</if>
		 limit #{offset} ,#{size}
	</select>


	<delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Jul 04 
			10:53:21 CST 2019. -->
		delete from user_info
		where id = #{id,jdbcType=INTEGER}
	</delete>
	<insert id="insert" parameterType="com.qqspace.bean.User"
		keyProperty="id" useGeneratedKeys="true">

		insert into user_info (id, user_login, user_name,
		user_gender,
		user_age, user_telphone,
		user_email,
		user_loves,user_address,user_intro, user_theme,
		user_signature,
		user_createType, user_createDate,user_birthday,user_sendWord
		)
		values
		(#{id,jdbcType=INTEGER},
		#{userLogin,jdbcType=VARCHAR},
		#{userName,jdbcType=VARCHAR},
		#{userGender,jdbcType=BIGINT},
		#{userAge,jdbcType=INTEGER},
		#{userTelphone,jdbcType=VARCHAR},
		#{userEmail,jdbcType=VARCHAR},
		#{userLoves,jdbcType=VARCHAR},
		#{userAddress,jdbcType=VARCHAR},
		#{userIntro,jdbcType=VARCHAR},
		#{userTheme,jdbcType=VARCHAR},
		#{userSignature,jdbcType=VARCHAR},
		#{userCreatetype,jdbcType=BIGINT},
		#{userCreatedate,jdbcType=TIMESTAMP},
		#{userBirthday,jdbcType=DATE},
		#{userSendWord,jdbcType=VARCHAR}
		)
	</insert>
	<insert id="insertSelective" parameterType="com.qqspace.bean.User"
		keyProperty="id" useGeneratedKeys="true">

		insert into user_info
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="id != null">
				id,
			</if>
			<if test="userLogin != null">
				user_login,
			</if>
			<if test="userName != null">
				user_name,
			</if>
			<if test="userGender != null">
				user_gender,
			</if>
			<if test="userAge != null">
				user_age,
			</if>
			<if test="userTelphone != null">
				user_telphone,
			</if>
			<if test="userEmail != null">
				user_email,
			</if>
			<if test="userLoves != null">
				user_loves,
			</if>
			<if test="userAddress != null">
				user_address,
			</if>
			<if test="userIntro != null">
				user_intro,
			</if>
			<if test="userTheme != null">
				user_theme,
			</if>
			<if test="userSignature != null">
				user_signature,
			</if>
			<if test="userCreatetype != null">
				user_createType,
			</if>
			<if test="userCreatedate != null">
				user_createDate,
			</if>
			<if test="userBirthday != null">
				user_birthday,
			</if>
			<if test="userSendWord != null">
				user_sendWord,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="id != null">
				#{id,jdbcType=INTEGER},
			</if>
			<if test="userLogin != null">
				#{userLogin,jdbcType=VARCHAR},
			</if>
			<if test="userName != null">
				#{userName,jdbcType=VARCHAR},
			</if>
			<if test="userGender != null">
				#{userGender,jdbcType=BIGINT},
			</if>
			<if test="userAge != null">
				#{userAge,jdbcType=INTEGER},
			</if>
			<if test="userTelphone != null">
				#{userTelphone,jdbcType=VARCHAR},
			</if>
			<if test="userEmail != null">
				#{userEmail,jdbcType=VARCHAR},
			</if>
			<if test="userLoves != null">
				#{userLoves,jdbcType=VARCHAR},
			</if>
			<if test="userAddress != null">
				#{userAddress,jdbcType=VARCHAR},
			</if>
			<if test="userIntro != null">
				#{userIntro,jdbcType=VARCHAR},
			</if>
			<if test="userTheme != null">
				#{userTheme,jdbcType=VARCHAR},
			</if>
			<if test="userSignature != null">
				#{userSignature,jdbcType=VARCHAR},
			</if>
			<if test="userCreatetype != null">
				#{userCreatetype,jdbcType=BIGINT},
			</if>
			<if test="userCreatedate != null">
				#{userCreatedate,jdbcType=TIMESTAMP},
			</if>
			<if test="userBirthday != null">
				#{userBirthday,jdbcType=DATE},
			</if>
			<if test="userSendWord != null">
				#{userSendWord,jdbcType=VARCHAR}
			</if>
		</trim>
	</insert>


	<update id="updateByPrimaryKeySelective" parameterType="com.qqspace.bean.User">

		update user_info
		<set>
			<if test="userLogin != null">
				user_login = #{userLogin,jdbcType=VARCHAR},
			</if>
			<if test="userName != null">
				user_name = #{userName,jdbcType=VARCHAR},
			</if>
			<if test="userGender != null">
				user_gender = #{userGender,jdbcType=BIGINT},
			</if>
			<if test="userAge != null">
				user_age = #{userAge,jdbcType=INTEGER},
			</if>
			<if test="userTelphone != null">
				user_telphone = #{userTelphone,jdbcType=VARCHAR},
			</if>
			<if test="userEmail != null">
				user_email = #{userEmail,jdbcType=VARCHAR},
			</if>
			<if test="userLoves != null">
				user_loves = #{userLoves,jdbcType=VARCHAR},
			</if>
			<if test="userAddress != null">
				user_address = #{userAddress,jdbcType=VARCHAR},
			</if>
			<if test="userIntro != null">
				user_intro = #{userIntro,jdbcType=VARCHAR},
			</if>
			<if test="userTheme != null">
				user_theme = #{userTheme,jdbcType=VARCHAR},
			</if>
			<if test="userSignature != null">
				user_signature = #{userSignature,jdbcType=VARCHAR},
			</if>
			<if test="userCreatetype != null">
				user_createType = #{userCreatetype,jdbcType=BIGINT},
			</if>
			<if test="userCreatedate != null">
				user_createDate = #{userCreatedate,jdbcType=TIMESTAMP},
			</if>
			<if test="userBirthday != null">
				user_birthday = #{userBirthday,jdbcType=DATE},
			</if>
			<if test="userSendWord != null">
				user_sendWord = #{userSendWord,jdbcType=VARCHAR}
			</if>
		</set>
		where id = #{id,jdbcType=INTEGER}
	</update>
	<update id="updateByPrimaryKey" parameterType="com.qqspace.bean.User">

		update user_info
		set user_login = #{userLogin,jdbcType=VARCHAR},
		user_name = #{userName,jdbcType=VARCHAR},
		user_gender =
		#{userGender,jdbcType=BIGINT},
		user_age = #{userAge,jdbcType=INTEGER},
		user_telphone = #{userTelphone,jdbcType=VARCHAR},
		user_email =
		#{userEmail,jdbcType=VARCHAR},
		user_loves =
		#{userLoves,jdbcType=VARCHAR},
		user_address =
		#{userAddress,jdbcType=VARCHAR},
		user_intro =
		#{userIntro,jdbcType=VARCHAR},
		user_theme =
		#{userTheme,jdbcType=VARCHAR},
		user_signature =
		#{userSignature,jdbcType=VARCHAR},
		user_createType =
		#{userCreatetype,jdbcType=BIGINT},
		user_createDate =
		#{userCreatedate,jdbcType=TIMESTAMP},
		user_birthday =
		#{userBirthday,jdbcType=DATE}, 
		user_sendWord =
	    #{userSendWord,jdbcType=VARCHAR} 
		where id = #{id,jdbcType=INTEGER}
	</update>

	<update id="updateByUserTheme" parameterType="com.qqspace.bean.User">
		update user_info
		<set>
			user_theme = #{userTheme,jdbcType=VARCHAR}
		</set>
		where id = #{id,jdbcType=INTEGER}
	</update>
	<update id="updateSendWordByUserid" >
		update user_info
		<set>
			user_sendWord = #{userSendWord,jdbcType=VARCHAR}
		</set>
		where id = #{id,jdbcType=INTEGER}
	</update>


</mapper>